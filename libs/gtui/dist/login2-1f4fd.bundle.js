/*!
 * Name: gt-ui
 * SVNVersion: 1381
 * Date: 2018-04-27
 * Description: 前端框架
 */
webpackJsonp(["login2","frame0"],{"./src/custom/login/login2/img/password.png":function(s,o){s.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAOCAYAAAAbvf3sAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAKhJREFUeNpiXLduHQMScAfiSiA2h/JPAnEHEO+AKWBCUhwIxJuA+AgQO0MxiL0RKgcGLEgaOoG4DkrDwDEg/gQVW49sgwIQqwLxAgZMsBAqp4CsgRdKv8Si4SWyGpCTlIBYBiqoxIAbgNR8BWm4iyR4F4+GbeihRBTApuE3EEdA8W9iNDwC4pVQ/AhdkgWLBmUgjkRiE9QAAgK4/IBLQx6pGjRwaQAIMADGBBxgGr24bQAAAABJRU5ErkJggg=="},"./src/custom/login/login2/img/user.png":function(s,o){s.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAM1JREFUeNpiXLduHQMa0ALiViB2gvL3AnENEF9DVsSCpkkHiI8BMS+SWCAQOwOxNRBfgQkyoWmchKYJBvigcgzYNLIDsT0DbgCSY8OmkQmLC9AtYcam8TsQn8ej8TxUDVY/VgDxXyya/kLlGHBpPA7EfkB8G0nsDlTsOC6N4UD8BIgTgDgGiBWhOBoq9gSqBiUeI4B4GRAzAnEoFP/DYvhyqJoVIEFxIJ4FFWAgEMqMULXiIIkCHJGOC4DUFoA0ejKQDjxBGtXI0KgGEGAAUQQfXhrjVIgAAAAASUVORK5CYII="},"./src/custom/login/login2/img/verificationCode.png":function(s,o){s.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAOCAYAAAAbvf3sAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAN5JREFUeNqU0D8LQVEYx/HrT4kMMhi8AHkBMpi9AFnJaDYq1jvIS1BksBjucNmUhWKRwTsgSTIohen6Hj3qdrq3+NWnbuc8zz3nOQHLsgwtcZjy3cLdvRlGERGkkUcZSdmvYYoFjniphpnhnwSq4pOg8Wd+aVhi5Z7BL0808EDf64QrxvJ9QgFnDBDyarigiZIUOxjp1w7K0SpZrOWvB/QQ0655Uw0b10IKcwyR85hrpxo62mIUFZ+H6KqGCdpyZ784UmN/BzJl2L1H8V72TP2VbGRQx1bUZc3+Fr0FGAAMdCytxQ2+8wAAAABJRU5ErkJggg=="},"./src/custom/login/login2/login.html":function(s,o){s.exports='<div ng-controller=loginCtrl style=height:100%> <banner style=background-image:url({{loginInfo.bjUrl}}) ng-style="{\'height\':loginInfo.footer ? \'calc(100% - 60px)\' : \'100%\'}"> <div class=title> <div class=logBox> <img ng-if=loginInfo.logo ng-src={{loginInfo.logo}} /> </div> <div class=titleText> <p>{{loginInfo.cname}}</p> <p>{{loginInfo.ename}}</p> </div> </div> <div class=content ng-style="{\'height\':loginInfo.footer ? \'calc(100% - 125px)\' : \'100%\'}"> <div class=swiperBox ng-if=loginInfo.swiperImgs> <div class=swiper-container> <div class=swiper-wrapper> <div ng-repeat="item in loginInfo.swiperImgs" class=swiper-slide> <img ng-src={{item.url}} /><span class="tips showTips">{{item.caption}}</span> </div> </div> <div class=swiper-pagination></div> </div> </div> <form ng-show="loginInfo.system != \'ww\' && !changePassword"> <div class=inputBox> <div class=inputTitle>用户登录</div> <ul class=inputList> <li> <img class=iconImg ng-src={{userImg}} /><input class=form-control type=text value="" ng-model=loginData.username name=username placeholder=请输入您的用户名 /> </li> <li> <img class=iconImg ng-src={{passwordImg}} /><input class=form-control value="" ng-model=loginData.password name=password type=password placeholder=请输入您的密码 /> </li> <li> <img class=iconImg ng-src={{codeImg}} /> <input class="form-control herfWidth" type=text name=checkCode ng-model=loginData.code placeholder=验证码 /> <span class=codeBox> <img src=xxxHTMLLINKxxx0.498786800076348240.1278881115501731xxx ng-click=reloadCode() id=imgCode /></span> <a class=change href=javascript:; ng-click=reloadCode()>换一张</a> </li> <li ng-if=loginInfo.register> <span>还没有账号?</span><a ng-href={{loginInfo.register}}>立即注册</a> </li> </ul> <div class=btnBox> <button class=btn-submit type=button name=submit ng-click=submit()>登录</button> </div> </div> </form> <form ng-show="loginInfo.system == \'ww\' && !changePassword"> <div class=logn-content-box> <div class=title> 用户登录 </div> <ul class=list> <li> <span>用户名</span><input type=text placeholder=请输入用户名 ng-model=loginData.username name=username class=form-control /> </li> <li> <span>密&nbsp;&nbsp;&nbsp;码</span><input ng-model=loginData.password name=password type=password placeholder=请输入您的密码 class=form-control /> </li> <li> <div class=left> <span>验证码</span><input type=text placeholder=验证码 name=checkCode ng-model=loginData.code class=form-control /> </div> <div class=right> <img src=xxxHTMLLINKxxx0.475101498623368370.16307866729906317xxx ng-click=reloadCode() id=wwimgCode /> <span><a href=javascript:; ng-click=reloadCode()>换一张</a></span> </div> </li> <li> <span></span> </li> <li> <button type=button name=submit ng-click=submit() class="btn btn-block btn-primary" type=button>登录</button> </li> </ul> <p>{{loginInfo.unit1}}</p> <p>{{loginInfo.unit2}}</p> </div> </form> <form ng-show=changePassword> <div class=inputBox> <div class=inputTitle>修改用户密码</div> <ul class=inputList> <li> <img class=iconImg ng-src={{userImg}} /><input class=form-control type=text value="" ng-model=changePasswordData.loginName name=loginName placeholder=请输入您的用户名 /> </li> <li> <img class=iconImg ng-src={{passwordImg}} /><input class=form-control value="" ng-model=changePasswordData.oriPassword name=oriPassword type=password placeholder=请输入原始密码 /> </li> <li> <img class=iconImg ng-src={{passwordImg}} /><input class=form-control value="" ng-model=changePasswordData.newPassword name=password type=password placeholder=请输入新密码 /> </li> <li> <img class=iconImg ng-src={{passwordImg}} /><input class=form-control value="" ng-model=changePasswordData.newPasswordAgain name=newPasswordAgain type=password placeholder=请再次输入新密码 /> </li> </ul> <div class=btnBox> <button class=btn-submit type=button name=submit ng-click=confirmChangePassword()>确认修改</button> </div> </div> </form> </div> </banner> <footer ng-if=loginInfo.footer ng-bind-html="loginInfo.footer | to_trusted"></footer> </div>'},"./src/custom/login/login2/login.js":function(s,o,e){"use strict";e("./src/custom/frame/frame.js"),e("./src/custom/login/login2/login.less");var n=angular.module("loginApp",[]);n.controller("loginCtrl",["$scope","$timeout",function(s,o){var n;s.loginInfo=loginInfo,s.userImg=e("./src/custom/login/login2/img/user.png"),s.passwordImg=e("./src/custom/login/login2/img/password.png"),s.codeImg=e("./src/custom/login/login2/img/verificationCode.png");var a=GM.LayoutOper.getURLParams(window.location.href),i=a.service,t=null==a.appKey?"mainApp":a.appKey;"1"===a.changePassword?s.changePassword=!0:s.changePassword=!1,GM.CommonOper.isStrNullOrEmpty(i)&&(i=MAIN_PAGE_PATH),"1"===a.logout&&((n=GM.CommonOper.ajaxRequest(RESTURL.logout))&&!0===n.success?GM.LayoutOper.clearCookie():GM.Alert.show("提示","登出失败！"));var l=GM.CommonOper.getCookie("clientServerToken");if(!GM.CommonOper.isStrNullOrEmpty(l)){var r=GM.LayoutOper.addURLParam(RESTURL.login,"GMSSO_SERVER_EC",l);if(r=GM.LayoutOper.addURLParam(r,"service",i),r=GM.LayoutOper.addURLParam(r,"appKey",t),(n=GM.CommonOper.ajaxRequest(r))&&!0===n.success&&null!=n.data)return p(i,n.data.gmsso_cli_ec_key),!0}if(loginInfo.swiperImgs)var g=o(function(){new Swiper(".swiper-container",{loop:!0,speed:700,autoplay:5e3,pagination:".swiper-pagination",onTransitionStart:function(s){$(".tips").removeClass("showTips")},onTransitionEnd:function(s){$(".swiper-wrapper").find(".swiper-slide").eq(s.activeIndex).find(".tips").addClass("showTips")}}).onResize(),clearTimeout(g)},50);s.loginData={},s.submit=function(){var o=s.loginData;if(o.base64Code=GM.verifyCode,GM.CommonOper.isStrNullOrEmpty(o.username))GM.Alert.show("提示","请输入用户名！");else if(GM.CommonOper.isStrNullOrEmpty(o.password))GM.Alert.show("提示","请输入密码！");else if(GM.CommonOper.isStrNullOrEmpty(o.code))GM.Alert.show("提示","请输入验证码！");else if(o.code.toLowerCase()===o.base64Code.toLowerCase()){o.service=i,o.appKey=t;var e=RESTURL.login,n=GM.CommonOper.ajaxRequest(e,o,{type:"get"});if(n&&!0===n.success&&null!=n.data)GM.CommonOper.addCookie("clientServerToken",n.data.gmsso_ser_ec_key,1),l=n.data.gmsso_ser_ec_key,n.data.gmsso_cli_ec_key?p(i,n.data.gmsso_cli_ec_key):GM.Alert.show("提示","当前子系统路径无法识别！");else n.message.search(/该用户超过半年没有登录/g)>=0?GM.Alert.show("提示",n.message,null,function(){s.changePassword=!0,s.$apply()}):GM.Alert.show("提示",n.message)}else GM.Alert.show("提示","验证码错误，请重新输入！")},s.changePasswordData={};var c=/[A-Za-z].*[0-9]|[0-9].*[A-Za-z]/;function p(s,o){var e=GM.LayoutOper.addURLParam(s,"GMSSO_CLIENT_EC",o);e=GM.LayoutOper.addURLParam(e,"GMLOGIN_SERVER_EC",l),window.location.href=e}s.confirmChangePassword=function(){if(GM.CommonOper.isStrNullOrEmpty(s.changePasswordData.loginName))GM.Alert.show("提示","请输入用户名！");else if(GM.CommonOper.isStrNullOrEmpty(s.changePasswordData.oriPassword))GM.Alert.show("提示","请输入原始密码！");else if(GM.CommonOper.isStrNullOrEmpty(s.changePasswordData.newPassword))GM.Alert.show("提示","请输入新密码！");else if(GM.CommonOper.isStrNullOrEmpty(s.changePasswordData.newPasswordAgain))GM.Alert.show("提示","请再次输入新密码！");else if(c.test(s.changePasswordData.newPassword)&&c.test(s.changePasswordData.newPasswordAgain))if(s.changePasswordData.newPassword===s.changePasswordData.newPasswordAgain){var o=UUMS_SERVER+"user/updatePassword",e=GM.CommonOper.ajaxRequest(o,s.changePasswordData,{type:"post"});e&&!0===e.success?(GM.Infomation.show("密码修改成功",{type:"success"}),s.changePassword=!1,s.loginData.password=""):GM.Alert.show("提示",e.message)}else GM.Infomation.show("两次输入密码不一致",{type:"warning"});else GM.Alert.show("提示","密码输入不符合规范！密码须包含数字、字母")},s.reloadCode=function(){var s=GM.CommonOper.ajaxRequest(LOGIN_SERVER+"getCode?"+Math.random(),null,{type:"get"});s&&!0===s.success&&($("#imgCode").attr("src","data:image/png;base64,"+s.data),$("#wwimgCode").attr("src","data:image/png;base64,"+s.data),GM.verifyCode=s.message)},$(document.body).keyup(function(o){13===o.keyCode&&s.submit()}),s.reloadCode()}]),n.filter("to_trusted",["$sce",function(s){return function(o){return s.trustAsHtml(o)}}]),n.run(["$templateCache",function(s){var o=e("./src/custom/login/login2/login.html");s.put("login.tpl.html",o)}])},"./src/custom/login/login2/login.less":function(s,o){},"dll-reference base":function(s,o){s.exports=base},"dll-reference ngs":function(s,o){s.exports=ngs},"dll-reference ngui":function(s,o){s.exports=ngui}},["./src/custom/login/login2/login.js"]);
//# sourceMappingURL=login2-1f4fd.bundle.js.map