{"version":3,"sources":["webpack:///./src/custom/system-center/center3/system-center.html","webpack:///./src/custom/system-center/center3/system-center.js","webpack:///./src/custom/system-center/center3/user.png","webpack:///external \"base\"","webpack:///external \"ngs\"","webpack:///external \"ngui\""],"names":["module","exports","__webpack_require__","app","angular","controller","$scope","$gmRestful","pRestful","GM","FrameManager","prepareData","arrayApps","ii","AppInfos","length","appItem","addItem","img","icon","url","host","txt","title","width","height","permission","name","GLOBAL_INDEX_CONFIG","metroBoxList","push","noPermissionArry","CenterCommon","getPermissionList","i","backgoundImg","logImg","systemName","EnglishSystemName","user","avatar","background","border-radius","logout","$event","preventDefault","$rootScope","moreItem","pushIntoArray","pItem","arrayBox","bResult","jj","isItemFit","fitArray","nIndexX","nIndexY","bFit","tempArray","nX","nY","result","initArray","arrayPageOne","arrayPageTwo","items","bRt","lastItem","nPageHeight","nPageWidth","unshift","indexOf","moreMetroBoxList","getPageList","goSubsystem","item","className","openSystem","moreOpen","Copyright","moreClose","run","$templateCache","console","log","strTem","put","addToken","base","ngs","ngui"],"mappings":"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","file":"center3-8f34c.bundle.js","sourcesContent":["module.exports = \"<div ng-controller=systemCenterCtrl> <div id=myBanner ng-controller=bannerCtrl> <img class=backImg ng-src={{backgoundImg}} /> <div class=title> <div class=logBox> <img ng-src={{logImg}} /> </div> <div class=titleText> <p ng-bind=systemName></p> <p ng-bind=EnglishSystemName></p> </div> </div> <div class=logOut ng-init=\\\"userHide = true\\\" ng-mouseover=\\\"userHide = false\\\" ng-mouseleave=\\\"userHide = true\\\"> <div><img class=userImg ng-style={{user.avatar}} /><span class=userName ng-bind=user.caption></span><i class=\\\"icon icon-chevron-down\\\"></i></div> <ul class=message ng-hide=userHide> <li><a ng-click=logout($event) style=color:#fff>退出登录</a></li> </ul> </div> </div> <div id=metroBox ng-controller=metroBoxCtrl> <div class=subBox ng-repeat=\\\"list in metroBoxList track by $index\\\" title={{list.title}} ng-class=\\\"{width2:list.width==2,width3:list.width==3,width4:list.width==4,height2:list.height==2,height3:list.height==3,disabled:list.className=='disable'}\\\"> <a ng-click=goSubsystem(list,$event,$index)> <div class=imgBox> <img ng-src={{list.img}} /> </div> <div class=txtBox> <span ng-bind=list.txt></span> </div> </a> </div> </div> <footer ng-controller=footerCtrl ng-bind=Copyright></footer> <div ng-controller=boxCtrl class=box ng-class=\\\"{'open':moreOpen=='open'}\\\"> <span class=close ng-click=moreClose();></span> <div id=moreMetroBox> <div class=subBox ng-repeat=\\\"list in moreMetroBoxList track by $index\\\" title={{list.title}} ng-class=\\\"{width2:list.width==2,width3:list.width==3,width4:list.width==4,height2:list.height==2,height3:list.height==3,disabled:list.className=='disable'}\\\"> <a ng-click=goSubsystem(list,$event,$index)> <div class=imgBox> <img ng-src={{list.img}} /> </div> <div class=txtBox> <span ng-bind=list.txt></span> </div> </a> </div> </div> </div> </div> \";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/custom/system-center/center3/system-center.html\n// module id = ./src/custom/system-center/center3/system-center.html\n// module chunks = center3","import '../../frame/frame.js';\r\nimport '../center-common.js';\r\nimport './system-center.less';\r\n\r\nvar app = angular.module('systemCenterApp', ['gm.ngCustom.control', 'ngResource']);\r\n\r\n//主控制器\r\napp.controller('systemCenterCtrl', ['$scope', '$gmRestful', function ($scope, $gmRestful) {\r\n    //数据准备\r\n    var pRestful = new $gmRestful();\r\n    GM.FrameManager.prepareData($scope, pRestful);\r\n\r\n    //获取APP子系统列表信息\r\n    var arrayApps = [];\r\n    for (var ii = 0; ii < GM.AppInfos.length; ii++) {\r\n        var appItem = GM.AppInfos[ii];\r\n        var addItem = {\r\n            img: appItem.icon,\r\n            url: appItem.host,\r\n            txt: appItem.title,\r\n            title: appItem.title,\r\n            width: 1,\r\n            height: 1,\r\n            permission: appItem.name\r\n        };\r\n        if (GLOBAL_INDEX_CONFIG.metroBoxList && GLOBAL_INDEX_CONFIG.metroBoxList[ii]) {\r\n            addItem.width = GLOBAL_INDEX_CONFIG.metroBoxList[ii].width;\r\n            addItem.height = GLOBAL_INDEX_CONFIG.metroBoxList[ii].height;\r\n            if (GLOBAL_INDEX_CONFIG.metroBoxList[ii].url) {\r\n                addItem.url = GLOBAL_INDEX_CONFIG.metroBoxList[ii].url;\r\n            }\r\n        }\r\n        arrayApps.push(addItem);\r\n    }\r\n\r\n    //子系统权限控制\r\n    var noPermissionArry = GM.CenterCommon.getPermissionList(arrayApps);\r\n    for (var i in noPermissionArry) {\r\n        arrayApps[noPermissionArry[i]]['className'] = 'disable';\r\n        arrayApps[noPermissionArry[i]]['title'] = '无此系统权限';\r\n    }\r\n\r\n    GLOBAL_INDEX_CONFIG.metroBoxList = arrayApps;\r\n}]);\r\n\r\napp.controller('bannerCtrl', ['$scope', function ($scope) {\r\n    $scope.backgoundImg = GLOBAL_INDEX_CONFIG.backgoundImg;\r\n    $scope.logImg = GLOBAL_INDEX_CONFIG.logImg;\r\n    $scope.systemName = GLOBAL_INDEX_CONFIG.systemName;\r\n    $scope.EnglishSystemName = GLOBAL_INDEX_CONFIG.EnglishSystemName;\r\n\r\n    //暂时用的假头像和用户名\r\n    if ($scope.user) {\r\n        $scope.user.avatar = 'syscenter/img/touxiang.png';\r\n        $scope.user.avatar = {\r\n            background: 'url(' + require('./user.png') + ') no-repeat 0 0 / contain',\r\n            'border-radius': '50px'\r\n        };\r\n    }\r\n\r\n    //登出\r\n    $scope.logout = function ($event) {\r\n        GM.FrameManager.logout();\r\n        $event.preventDefault();\r\n    };\r\n}]);\r\napp.controller('metroBoxCtrl', ['$scope', '$rootScope', function ($scope, $rootScope) {\r\n    $scope.metroBoxList = [];\r\n    var moreItem = {\r\n        img: 'syscenter/img/更多3.png',\r\n        url: 'javascript:;',\r\n        name: 'more',\r\n        txt: '更多'\r\n    };\r\n\r\n    //获取当前页需要展示的列表\r\n    getPageList();\r\n\r\n    $rootScope.goSubsystem = function (item) {\r\n        if (item.name !== 'more') {\r\n            if (item.className !== 'disable') {\r\n                GM.CenterCommon.openSystem(item.url);\r\n                return false;\r\n            } else {\r\n                return false;\r\n            }\r\n        } else {\r\n            $rootScope.moreOpen = 'open';\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @hide\r\n     * @description 获取页面的子系统集合\r\n     */\r\n    function getPageList () {\r\n        var nPageWidth = 4;\r\n        var nPageHeight = 3;\r\n        var tempArray = initArray(nPageHeight, nPageWidth);\r\n        var arrayPageOne = [];\r\n        var arrayPageTwo = [];\r\n        var ii;\r\n        var pItem;\r\n        var items = GLOBAL_INDEX_CONFIG.metroBoxList;\r\n\r\n        for (ii = 0; ii < items.length; ii++) {\r\n            pItem = items[ii];\r\n            var bRt = pushIntoArray(pItem, tempArray);\r\n            if (bRt === true) {\r\n                //arrayPageOne.push(pItem);\r\n            } else {\r\n                arrayPageTwo.push(pItem);\r\n            }\r\n        }\r\n\r\n        if (arrayPageTwo.length > 0) {\r\n            //当有第二页的时候，需要将最后一个模块放到第二页，\r\n            //然后出现更多按钮\r\n            var lastItem = tempArray[nPageHeight - 1][nPageWidth - 1];\r\n\r\n            //删掉第一页中的这个按钮\r\n            for (ii = 0; ii < nPageHeight; ii++) {\r\n                for (var jj = 0; jj < nPageWidth; jj++) {\r\n                    pItem = tempArray[ii][jj];\r\n                    if (pItem === lastItem) {\r\n                        tempArray[ii][jj] = null;\r\n                    }\r\n                }\r\n            }\r\n            arrayPageTwo.unshift(lastItem);\r\n\r\n            //第一页添加更多按钮\r\n            tempArray[nPageHeight - 1][nPageWidth - 1] = moreItem;\r\n        }\r\n\r\n        for (ii = 0; ii < nPageHeight; ii++) {\r\n            for (var jj = 0; jj < nPageWidth; jj++) {\r\n                pItem = tempArray[ii][jj];\r\n                if (arrayPageOne.indexOf(pItem) === -1 && pItem != null) {\r\n                    arrayPageOne.push(pItem);\r\n                }\r\n            }\r\n        }\r\n        $scope.metroBoxList = arrayPageOne;\r\n        $rootScope.moreMetroBoxList = arrayPageTwo;\r\n    }\r\n\r\n    /**\r\n     * @hide\r\n     * @description 初始化二维数组\r\n     * @method initArray\r\n     * @param {Number} nX\r\n     * @param {Number} nY\r\n     * @return {Array}\r\n     */\r\n    function initArray (nX, nY) {\r\n        var result = [];\r\n        for (var ii = 0; ii < nX; ii++) {\r\n            result[ii] = [];\r\n            for (var jj = 0; jj < nY; jj++) {\r\n                result[ii][jj] = null;\r\n            }\r\n        }\r\n        // result[nX - 1][nY - 1] = moreItem;\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * @hide\r\n     * @description 将数组元素插入二维数组中\r\n     * @method pushIntoArray\r\n     * @param {Number} pItem 数组元素\r\n     * @param {Array} arrayBox 二维数组\r\n     * @return {boolean} 是否插入成功\r\n     */\r\n    function pushIntoArray (pItem, arrayBox) {\r\n        var bResult = false;\r\n        for (var ii = 0; ii < arrayBox.length; ii++) {\r\n            for (var jj = 0; jj < arrayBox[ii].length; jj++) {\r\n                if (arrayBox[ii][jj] == null) {\r\n                    var bFit = isItemFit(pItem, arrayBox, jj, ii);\r\n                    if (bFit) {\r\n                        fitArray(pItem, arrayBox, jj, ii);\r\n                        bResult = true;\r\n                        return bResult;\r\n                    } else {\r\n                        // arrayBox[ii][jj] = {};\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return bResult;\r\n    }\r\n\r\n    /**\r\n     * @hide\r\n     * @description 当前页是否能够放下该模块\r\n     * @method isItemFit\r\n     * @param pItem\r\n     * @param arrayBox\r\n     * @param nIndexX\r\n     * @param nIndexY\r\n     * @return {boolean}\r\n     */\r\n    function isItemFit (pItem, arrayBox, nIndexX, nIndexY) {\r\n        var bFit = true;\r\n        for (var ii = nIndexX; ii < nIndexX + pItem.width; ii++) {\r\n            if (ii >= arrayBox[0].length) {\r\n                return false;\r\n            }\r\n            for (var jj = nIndexY; jj < nIndexY + pItem.height; jj++) {\r\n                if (jj >= arrayBox.length) {\r\n                    return false;\r\n                }\r\n                if (arrayBox[jj][ii] != null) {\r\n                    bFit = false;\r\n                    return bFit;\r\n                }\r\n            }\r\n        }\r\n        return bFit;\r\n    }\r\n\r\n    /**\r\n     * @hide\r\n     * @description 能够放入二维数组的前提下插入到数组\r\n     * @param pItem\r\n     * @param arrayBox\r\n     * @param nIndexX\r\n     * @param nIndexY\r\n     */\r\n    function fitArray (pItem, arrayBox, nIndexX, nIndexY) {\r\n        for (var ii = nIndexX; ii < nIndexX + pItem.width; ii++) {\r\n            for (var jj = nIndexY; jj < nIndexY + pItem.height; jj++) {\r\n                arrayBox[jj][ii] = pItem;\r\n            }\r\n        }\r\n    }\r\n}]);\r\napp.controller('footerCtrl', ['$scope', function ($scope) {\r\n    $scope.Copyright = GLOBAL_INDEX_CONFIG.Copyright;\r\n}]);\r\napp.controller('boxCtrl', ['$scope', '$rootScope', function ($scope, $rootScope) {\r\n    $rootScope.moreOpen = 'close';\r\n    $scope.moreClose = function () {\r\n        $rootScope.moreOpen = 'close';\r\n    };\r\n}]);\r\napp.run(['$templateCache', function ($templateCache) {\r\n    console.log('center3');\r\n    let strTem = require('./system-center.html');\r\n    $templateCache.put('system-center.tpl.html', strTem);\r\n}]);\r\n\r\n//验证token\r\nGM.FrameManager.addToken(app);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/custom/system-center/center3/system-center.js","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAMAAABG8BK2AAAARVBMVEX///88gv87gf+00//3+v9Cif9Plv/9/v/p8v/I3//w9v9np/98s//R5P+UwP/b6v9Zn//i7v9Hjv+ly/9vrP+Huf/A2v9EXJZaAAABdklEQVR4Xu2WSbKDMBBDkWxmMg/3P+ovUKn8d5BmayUmlYVfpG7cpDmrqqqqqinNz/Z+fZyC5IUA19WdAOUnSRAAiG+U0nfYGNR7CGJGUAgFewcxM0iCIpHoY5lUFGqBwVQZDrWJuIQwEwQhwVUYgxgKJAiCmOxELvKtCaktNd5wU4hygfaTFGcJYwDQKHxCmAHQdlKcFML0AAojfqheIsgQ2IXnBFRlYW7hSbFQFAJdbsLKcCLIS1CLEhFtc0YjqVTXU5iHzGgSx/WFmsXPKTNQJpApDOlf3BC6vGMdz6ktB0FlHn42cpm1VVZ8urqUf4Gk1lHgoeWpvBy2NLakKWSBiMh5OmRlBkBvF0gvGnrkYJSigE5ib+KwPfRYoTkkvOTN5X7sYpL2yAu9lw4q/msXc3draI5LVHi47w9gI2wGMmGU1O9gBgFsyKtclHk48tfIv+9WuUnl+7iDucI7SqOMKB3E3hTrnKXQnOu/zZ8fNlVVVVV/tb4Is6ZkZ9gAAAAASUVORK5CYII=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/custom/system-center/center3/user.png\n// module id = ./src/custom/system-center/center3/user.png\n// module chunks = center3","module.exports = base;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"base\"\n// module id = dll-reference base\n// module chunks = frame0 frame2 frame3 center1 center2 center3 login1 login2 example","module.exports = ngs;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ngs\"\n// module id = dll-reference ngs\n// module chunks = frame0 frame2 frame3 center1 center2 center3 login1 login2 example","module.exports = ngui;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ngui\"\n// module id = dll-reference ngui\n// module chunks = frame0 frame2 frame3 center1 center2 center3 login1 login2 example"],"sourceRoot":""}