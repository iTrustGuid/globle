{"version":3,"sources":["webpack:///./src/custom/login/login2/img/password.png","webpack:///./src/custom/login/login2/img/user.png","webpack:///./src/custom/login/login2/img/verificationCode.png","webpack:///./src/custom/login/login2/login.html","webpack:///./src/custom/login/login2/login.js","webpack:///external \"base\"","webpack:///external \"ngs\"","webpack:///external \"ngui\""],"names":["module","exports","__webpack_require__","app","angular","controller","$scope","$timeout","result","loginInfo","userImg","passwordImg","codeImg","changePassword","params","GM","LayoutOper","getURLParams","window","location","href","service","appKey","CommonOper","isStrNullOrEmpty","MAIN_PAGE_PATH","logout","ajaxRequest","RESTURL","success","clearCookie","Alert","show","GMLOGIN_SERVER_EC","getCookie","strUrl","addURLParam","login","data","goService","gmsso_cli_ec_key","swiperImgs","timer","Swiper","loop","speed","autoplay","pagination","onTransitionStart","swiper","$","removeClass","onTransitionEnd","find","eq","activeIndex","addClass","onResize","clearTimeout","strService","strToken","loginData","submit","base64Code","verifyCode","username","password","code","toLowerCase","type","addCookie","gmsso_ser_ec_key","patt","message","search","$apply","changePasswordData","confirmChangePassword","loginName","oriPassword","newPassword","newPasswordAgain","test","changePasswordUrl","UUMS_SERVER","changePasswordResult","Infomation","reloadCode","LOGIN_SERVER","Math","random","attr","document","body","keyup","event","keyCode","filter","$sce","text","trustAsHtml","run","$templateCache","strTem","put","bootstrap","base","ngs","ngui"],"mappings":"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","file":"login2-55775.bundle.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAOCAYAAAAbvf3sAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAKhJREFUeNpiXLduHQMScAfiSiA2h/JPAnEHEO+AKWBCUhwIxJuA+AgQO0MxiL0RKgcGLEgaOoG4DkrDwDEg/gQVW49sgwIQqwLxAgZMsBAqp4CsgRdKv8Si4SWyGpCTlIBYBiqoxIAbgNR8BWm4iyR4F4+GbeihRBTApuE3EEdA8W9iNDwC4pVQ/AhdkgWLBmUgjkRiE9QAAgK4/IBLQx6pGjRwaQAIMADGBBxgGr24bQAAAABJRU5ErkJggg==\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/custom/login/login2/img/password.png\n// module id = ./src/custom/login/login2/img/password.png\n// module chunks = login2","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAM1JREFUeNpiXLduHQMa0ALiViB2gvL3AnENEF9DVsSCpkkHiI8BMS+SWCAQOwOxNRBfgQkyoWmchKYJBvigcgzYNLIDsT0DbgCSY8OmkQmLC9AtYcam8TsQn8ej8TxUDVY/VgDxXyya/kLlGHBpPA7EfkB8G0nsDlTsOC6N4UD8BIgTgDgGiBWhOBoq9gSqBiUeI4B4GRAzAnEoFP/DYvhyqJoVIEFxIJ4FFWAgEMqMULXiIIkCHJGOC4DUFoA0ejKQDjxBGtXI0KgGEGAAUQQfXhrjVIgAAAAASUVORK5CYII=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/custom/login/login2/img/user.png\n// module id = ./src/custom/login/login2/img/user.png\n// module chunks = login2","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAOCAYAAAAbvf3sAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAN5JREFUeNqU0D8LQVEYx/HrT4kMMhi8AHkBMpi9AFnJaDYq1jvIS1BksBjucNmUhWKRwTsgSTIohen6Hj3qdrq3+NWnbuc8zz3nOQHLsgwtcZjy3cLdvRlGERGkkUcZSdmvYYoFjniphpnhnwSq4pOg8Wd+aVhi5Z7BL0808EDf64QrxvJ9QgFnDBDyarigiZIUOxjp1w7K0SpZrOWvB/QQ0655Uw0b10IKcwyR85hrpxo62mIUFZ+H6KqGCdpyZ784UmN/BzJl2L1H8V72TP2VbGRQx1bUZc3+Fr0FGAAMdCytxQ2+8wAAAABJRU5ErkJggg==\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/custom/login/login2/img/verificationCode.png\n// module id = ./src/custom/login/login2/img/verificationCode.png\n// module chunks = login2","module.exports = \"<div ng-controller=\\\"loginCtrl\\\" style=\\\"height: 100%;\\\">\\r\\n    <banner style=\\\"background-image:url({{loginInfo.bjUrl}}) ;\\\"  ng-style=\\\"{\\\\'height\\\\':loginInfo.footer ? \\\\'calc(100% - 60px)\\\\' : \\\\'100%\\\\'}\\\">\\r\\n        <div class=\\\"title\\\">\\r\\n            <div class=\\\"logBox\\\">\\r\\n                <img ng-if=\\\"loginInfo.logo\\\" ng-src=\\\"{{loginInfo.logo}}\\\"/>\\r\\n            </div>\\r\\n            <div class=\\\"titleText\\\">\\r\\n                <p>{{loginInfo.cname}}</p>\\r\\n                <p>{{loginInfo.ename}}</p>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"content\\\" ng-style=\\\"{\\\\'height\\\\':loginInfo.footer ? \\\\'calc(100% - 125px)\\\\' : \\\\'100%\\\\'}\\\">\\r\\n            <div class=\\\"swiperBox\\\" ng-if=\\\"loginInfo.swiperImgs\\\">\\r\\n                <div class=\\\"swiper-container\\\">\\r\\n                    <div class=\\\"swiper-wrapper\\\">\\r\\n                        <div ng-repeat=\\\"item in loginInfo.swiperImgs\\\" class=\\\"swiper-slide\\\">\\r\\n                            <img ng-src=\\\"{{item.url}}\\\"/><span class=\\\"tips showTips\\\">{{item.caption}}</span>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"swiper-pagination\\\"></div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <form ng-show=\\\"loginInfo.system != \\\\'ww\\\\' && !changePassword\\\">\\r\\n                <div class=\\\"inputBox\\\">\\r\\n                    <div class=\\\"inputTitle\\\">用户登录</div>\\r\\n                    <ul class=\\\"inputList\\\">\\r\\n                        <li>\\r\\n                            <img class=\\\"iconImg\\\" ng-src=\\\"{{userImg}}\\\"/><input class=\\\"form-control\\\" type=\\\"text\\\" value=\\\"\\\" ng-model=\\\"loginData.username\\\" name=\\\"username\\\" placeholder=\\\"请输入您的用户名\\\"/>\\r\\n                        </li>\\r\\n                        <li>\\r\\n                            <img class=\\\"iconImg\\\" ng-src=\\\"{{passwordImg}}\\\"/><input class=\\\"form-control\\\" value=\\\"\\\" ng-model=\\\"loginData.password\\\" name=\\\"password\\\" type=\\\"password\\\" placeholder=\\\"请输入您的密码\\\"/>\\r\\n                        </li>\\r\\n                        <li>\\r\\n                            <img class=\\\"iconImg\\\" ng-src=\\\"{{codeImg}}\\\"/>\\r\\n                            <input class=\\\"form-control herfWidth\\\" type=\\\"text\\\" name=\\\"checkCode\\\" ng-model=\\\"loginData.code\\\" placeholder=\\\"验证码\\\"/>\\r\\n                                <span class=\\\"codeBox\\\">\\r\\n                                <img src=\\\"\\\" ng-click=\\\"reloadCode()\\\" id=\\\"imgCode\\\"/></span>\\r\\n                            <a class=\\\"change\\\" href=\\\"javascript:;\\\" ng-click=\\\"reloadCode()\\\">换一张</a>\\r\\n                        </li>\\r\\n                        <li ng-if=\\\"loginInfo.register\\\">\\r\\n                            <span>还没有账号?</span><a ng-href=\\\"{{loginInfo.register}}\\\">立即注册</a>\\r\\n                        </li>\\r\\n                    </ul>\\r\\n                    <div class=\\\"btnBox\\\">\\r\\n                        <button class=\\\"btn-submit\\\" type=\\\"button\\\"  name=\\\"submit\\\" ng-click=\\\"submit()\\\">登录</button>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </form>\\r\\n            <form ng-show=\\\"loginInfo.system == \\\\'ww\\\\' && !changePassword\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"logn-content-box\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"title\\\">\\r\\n\\t\\t\\t\\t\\t\\t用户登录\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<ul class=\\\"list\\\">\\r\\n\\t\\t\\t\\t\\t\\t<li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>用户名</span><input type=\\\"text\\\" placeholder=\\\"请输入用户名\\\" ng-model=\\\"loginData.username\\\" name=\\\"username\\\" class=\\\"form-control\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t<li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>密&nbsp;&nbsp;&nbsp;码</span><input ng-model=\\\"loginData.password\\\" name=\\\"password\\\" type=\\\"password\\\" placeholder=\\\"请输入您的密码\\\" class=\\\"form-control\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t<li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span>验证码</span><input type=\\\"text\\\" placeholder=\\\"验证码\\\"name=\\\"checkCode\\\" ng-model=\\\"loginData.code\\\" class=\\\"form-control\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img src=\\\"\\\" ng-click=\\\"reloadCode()\\\" id=\\\"wwimgCode\\\"/>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span><a href=\\\"javascript:;\\\" ng-click=\\\"reloadCode()\\\">换一张</a></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t<li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span></span>\\r\\n\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t<li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<button  type=\\\"button\\\" name=\\\"submit\\\" ng-click=\\\"submit()\\\"  class=\\\"btn btn-block btn-primary\\\" type=\\\"button\\\">登录</button>\\r\\n\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t<p>{{loginInfo.unit1}}</p>\\r\\n\\t\\t\\t\\t\\t<p>{{loginInfo.unit2}}</p>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</form>\\r\\n\\t\\t\\t<form ng-show=\\\"changePassword\\\">\\r\\n                <div class=\\\"inputBox\\\">\\r\\n                    <div class=\\\"inputTitle\\\">修改用户密码</div>\\r\\n                    <ul class=\\\"inputList\\\">\\r\\n                        <li>\\r\\n                            <img class=\\\"iconImg\\\" ng-src=\\\"{{userImg}}\\\"/><input class=\\\"form-control\\\" type=\\\"text\\\" value=\\\"\\\" ng-model=\\\"changePasswordData.loginName\\\" name=\\\"loginName\\\" placeholder=\\\"请输入您的用户名\\\"/>\\r\\n                        </li>\\r\\n                        <li>\\r\\n                            <img class=\\\"iconImg\\\" ng-src=\\\"{{passwordImg}}\\\"/><input class=\\\"form-control\\\" value=\\\"\\\" ng-model=\\\"changePasswordData.oriPassword\\\" name=\\\"oriPassword\\\" type=\\\"password\\\" placeholder=\\\"请输入原始密码\\\"/>\\r\\n                        </li>\\r\\n                        <li>\\r\\n                            <img class=\\\"iconImg\\\" ng-src=\\\"{{passwordImg}}\\\"/><input class=\\\"form-control\\\" value=\\\"\\\" ng-model=\\\"changePasswordData.newPassword\\\" name=\\\"password\\\" type=\\\"password\\\" placeholder=\\\"请输入新密码\\\"/>\\r\\n                        </li>\\r\\n                        <li>\\r\\n                            <img class=\\\"iconImg\\\" ng-src=\\\"{{passwordImg}}\\\"/><input class=\\\"form-control\\\" value=\\\"\\\" ng-model=\\\"changePasswordData.newPasswordAgain\\\" name=\\\"newPasswordAgain\\\" type=\\\"password\\\" placeholder=\\\"请再次输入新密码\\\"/>\\r\\n                        </li>\\r\\n                    </ul>\\r\\n                    <div class=\\\"btnBox\\\">\\r\\n                        <button class=\\\"btn-submit\\\" type=\\\"button\\\"  name=\\\"submit\\\" ng-click=\\\"confirmChangePassword()\\\">确认修改</button>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </form>\\r\\n        </div>\\r\\n    </banner>\\r\\n    <footer ng-if=\\\"loginInfo.footer\\\" ng-bind-html=\\\"loginInfo.footer | to_trusted\\\"></footer>\\r\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/custom/login/login2/login.html\n// module id = ./src/custom/login/login2/login.html\n// module chunks = login2","import '../../frame/frame.js';\r\nimport './login.less';\r\n\r\nvar app = angular.module('loginApp', []);\r\napp.controller('loginCtrl', ['$scope', '$timeout', function ($scope, $timeout) {\r\n    var result;\r\n    $scope.loginInfo = loginInfo;\r\n    $scope.userImg = require('./img/user.png');\r\n    $scope.passwordImg = require('./img/password.png');\r\n    $scope.codeImg = require('./img/verificationCode.png');\r\n    //默认隐藏修改密码界面\r\n    $scope.changePassword = false;\r\n\r\n    var params = GM.LayoutOper.getURLParams(window.location.href);\r\n    var service = params.service;\r\n    var appKey = params.appKey == null ? 'mainApp' : params.appKey;\r\n\r\n    if (GM.CommonOper.isStrNullOrEmpty(service)) {\r\n        service = MAIN_PAGE_PATH;\r\n    }\r\n    var strLogout = params.logout;\r\n\r\n    if (strLogout === '1') {\r\n        //登出\r\n        result = GM.CommonOper.ajaxRequest(RESTURL.logout);\r\n        if (result && result.success === true) {\r\n            //登出成功\r\n            GM.LayoutOper.clearCookie();\r\n        } else {\r\n            //登出失败\r\n            GM.Alert.show('提示', '登出失败！');\r\n        }\r\n    }\r\n\r\n    //如果有cookies则自动登录\r\n    var GMLOGIN_SERVER_EC = GM.CommonOper.getCookie('clientServerToken');\r\n    if (!GM.CommonOper.isStrNullOrEmpty(GMLOGIN_SERVER_EC)) {\r\n        //尝试登录\r\n        var strUrl = GM.LayoutOper.addURLParam(RESTURL.login, 'GMSSO_SERVER_EC', GMLOGIN_SERVER_EC);\r\n        strUrl = GM.LayoutOper.addURLParam(strUrl, 'service', service);\r\n        strUrl = GM.LayoutOper.addURLParam(strUrl, 'appKey', appKey);\r\n        result = GM.CommonOper.ajaxRequest(strUrl);\r\n        if (result && result.success === true && result.data != null) {\r\n            //登录成功,跳转页面\r\n            goService(service, result.data.gmsso_cli_ec_key);\r\n            return true;\r\n        }\r\n    }\r\n    if (loginInfo.swiperImgs) {\r\n        var timer = $timeout(function () {\r\n            var mySwiper = new Swiper('.swiper-container', {\r\n                loop: true,\r\n                speed: 700,\r\n                autoplay: 5000,\r\n                pagination: '.swiper-pagination',\r\n                onTransitionStart: function (swiper) {\r\n                    $('.tips').removeClass('showTips');\r\n                },\r\n                onTransitionEnd: function (swiper) {\r\n                    $('.swiper-wrapper').find('.swiper-slide').eq(swiper.activeIndex).find('.tips').addClass('showTips');\r\n                }\r\n            });\r\n            mySwiper.onResize();\r\n            clearTimeout(timer);\r\n        }, 50);\r\n    }\r\n\r\n    //登录按钮\r\n    $scope.loginData = {};\r\n    $scope.submit = function () {\r\n        //验证表单\r\n        var loginData = $scope.loginData;\r\n        loginData.base64Code = GM.verifyCode;\r\n        if (GM.CommonOper.isStrNullOrEmpty(loginData.username)) {\r\n            GM.Alert.show('提示', '请输入用户名！');\r\n            return;\r\n        }\r\n        if (GM.CommonOper.isStrNullOrEmpty(loginData.password)) {\r\n            GM.Alert.show('提示', '请输入密码！');\r\n            return;\r\n        }\r\n        if (GM.CommonOper.isStrNullOrEmpty(loginData.code)) {\r\n            GM.Alert.show('提示', '请输入验证码！');\r\n            return;\r\n        }\r\n        if (loginData.code.toLowerCase() !== loginData.base64Code.toLowerCase()) {\r\n            GM.Alert.show('提示', '验证码错误，请重新输入！');\r\n            return;\r\n        }\r\n        loginData.service = service;\r\n        loginData.appKey = appKey;\r\n        var strUrl = RESTURL.login;\r\n        var result = GM.CommonOper.ajaxRequest(strUrl, loginData, {\r\n            type: 'get'\r\n        });\r\n        if (result && result.success === true && result.data != null) {\r\n            //登录成功\r\n            GM.CommonOper.addCookie('clientServerToken', result.data.gmsso_ser_ec_key, 1);\r\n            GMLOGIN_SERVER_EC = result.data.gmsso_ser_ec_key;\r\n            if (result.data.gmsso_cli_ec_key) {\r\n                goService(service, result.data.gmsso_cli_ec_key);\r\n            } else {\r\n                //没有配置子系统\r\n                GM.Alert.show('提示', '当前子系统路径无法识别！');\r\n            }\r\n        } else {\r\n            //登录失败\r\n            var resultMessage = result.message;\r\n            var patt = /[A-Za-z].*[0-9]|[0-9].*[A-Za-z]/;\r\n            if (resultMessage.search(/该用户超过半年没有登录/g) >= 0) {\r\n                GM.Alert.show('提示', result.message, null, function () {\r\n                    //该用户超过半年没有登录\r\n                    $scope.changePassword = true;\r\n                    $scope.$apply();\r\n                    $scope.changePasswordData = {};\r\n                    $scope.confirmChangePassword = function () {\r\n                        if (GM.CommonOper.isStrNullOrEmpty($scope.changePasswordData.loginName)) {\r\n                            GM.Alert.show('提示', '请输入用户名！');\r\n                            return;\r\n                        }\r\n                        if (GM.CommonOper.isStrNullOrEmpty($scope.changePasswordData.oriPassword)) {\r\n                            GM.Alert.show('提示', '请输入原始密码！');\r\n                            return;\r\n                        }\r\n                        if (GM.CommonOper.isStrNullOrEmpty($scope.changePasswordData.newPassword)) {\r\n                            GM.Alert.show('提示', '请输入新密码！');\r\n                            return;\r\n                        }\r\n                        if (GM.CommonOper.isStrNullOrEmpty($scope.changePasswordData.newPasswordAgain)) {\r\n                            GM.Alert.show('提示', '请再次输入新密码！');\r\n                            return;\r\n                        }\r\n                        if (!patt.test($scope.changePasswordData.newPassword) || !patt.test($scope.changePasswordData.newPasswordAgain)) {\r\n                            GM.Alert.show('提示', '密码输入不符合规范！密码须包含数字、字母');\r\n                            return;\r\n                        }\r\n                        if ($scope.changePasswordData.newPassword !== $scope.changePasswordData.newPasswordAgain) {\r\n                            GM.Infomation.show('两次输入密码不一致', { type: 'warning' });\r\n                            return;\r\n                        }\r\n                        var changePasswordUrl = UUMS_SERVER + 'user/updatePassword';\r\n                        var changePasswordResult = GM.CommonOper.ajaxRequest(changePasswordUrl, $scope.changePasswordData, {\r\n                            type: 'post'\r\n                        });\r\n                        if (changePasswordResult && changePasswordResult.success === true) {\r\n                            GM.Infomation.show('密码修改成功', { type: 'success' });\r\n                            $scope.changePassword = false;\r\n                            $scope.loginData.password = '';\r\n                        } else {\r\n                            GM.Alert.show('提示', changePasswordResult.message);\r\n                        }\r\n                    };\r\n                });\r\n            } else {\r\n                GM.Alert.show('提示', result.message);\r\n            }\r\n        }\r\n    };\r\n\r\n    //重新加载验证码\r\n    $scope.reloadCode = function () {\r\n        var result = GM.CommonOper.ajaxRequest(LOGIN_SERVER + 'getCode?' + Math.random(), null, {\r\n            type: 'get'\r\n        });\r\n        if (result && result.success === true) {\r\n            $('#imgCode').attr('src', 'data:image/png;base64,' + result.data);\r\n            $('#wwimgCode').attr('src', 'data:image/png;base64,' + result.data);\r\n            GM.verifyCode = result.message;\r\n        }\r\n    };\r\n\r\n    //注册点击事件\r\n    $(document.body).keyup(function (event) {\r\n        if (event.keyCode === 13) {\r\n            $scope.submit();\r\n        }\r\n    });\r\n\r\n    //初始化验证码\r\n    $scope.reloadCode();\r\n\r\n    //登录后页面跳转\r\n    function goService (strService, strToken) {\r\n        var strUrl = GM.LayoutOper.addURLParam(strService, 'GMSSO_CLIENT_EC', strToken);\r\n        strUrl = GM.LayoutOper.addURLParam(strUrl, 'GMLOGIN_SERVER_EC', GMLOGIN_SERVER_EC);\r\n        window.location.href = strUrl;\r\n    }\r\n}]);\r\napp.filter('to_trusted', ['$sce', function ($sce) {\r\n    return function (text) {\r\n        return $sce.trustAsHtml(text);\r\n    };\r\n}]);\r\napp.run(['$templateCache', function ($templateCache) {\r\n    let strTem = require('./login.html');\r\n    $templateCache.put('login.tpl.html', strTem);\r\n}]);\r\n\r\nangular.bootstrap(document, ['loginApp']);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/custom/login/login2/login.js","module.exports = base;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"base\"\n// module id = dll-reference base\n// module chunks = frame2 frame3 center1 center2 center3 login1 login2","module.exports = ngs;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ngs\"\n// module id = dll-reference ngs\n// module chunks = frame2 frame3 center1 center2 center3 login1 login2","module.exports = ngui;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ngui\"\n// module id = dll-reference ngui\n// module chunks = frame2 frame3 center1 center2 center3 login1 login2"],"sourceRoot":""}