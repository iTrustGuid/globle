webpackJsonp(["login2"],{"./src/custom/login/login2/img/password.png":function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAOCAYAAAAbvf3sAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAKhJREFUeNpiXLduHQMScAfiSiA2h/JPAnEHEO+AKWBCUhwIxJuA+AgQO0MxiL0RKgcGLEgaOoG4DkrDwDEg/gQVW49sgwIQqwLxAgZMsBAqp4CsgRdKv8Si4SWyGpCTlIBYBiqoxIAbgNR8BWm4iyR4F4+GbeihRBTApuE3EEdA8W9iNDwC4pVQ/AhdkgWLBmUgjkRiE9QAAgK4/IBLQx6pGjRwaQAIMADGBBxgGr24bQAAAABJRU5ErkJggg=="},"./src/custom/login/login2/img/user.png":function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAM1JREFUeNpiXLduHQMa0ALiViB2gvL3AnENEF9DVsSCpkkHiI8BMS+SWCAQOwOxNRBfgQkyoWmchKYJBvigcgzYNLIDsT0DbgCSY8OmkQmLC9AtYcam8TsQn8ej8TxUDVY/VgDxXyya/kLlGHBpPA7EfkB8G0nsDlTsOC6N4UD8BIgTgDgGiBWhOBoq9gSqBiUeI4B4GRAzAnEoFP/DYvhyqJoVIEFxIJ4FFWAgEMqMULXiIIkCHJGOC4DUFoA0ejKQDjxBGtXI0KgGEGAAUQQfXhrjVIgAAAAASUVORK5CYII="},"./src/custom/login/login2/img/verificationCode.png":function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAOCAYAAAAbvf3sAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAN5JREFUeNqU0D8LQVEYx/HrT4kMMhi8AHkBMpi9AFnJaDYq1jvIS1BksBjucNmUhWKRwTsgSTIohen6Hj3qdrq3+NWnbuc8zz3nOQHLsgwtcZjy3cLdvRlGERGkkUcZSdmvYYoFjniphpnhnwSq4pOg8Wd+aVhi5Z7BL0808EDf64QrxvJ9QgFnDBDyarigiZIUOxjp1w7K0SpZrOWvB/QQ0655Uw0b10IKcwyR85hrpxo62mIUFZ+H6KqGCdpyZ784UmN/BzJl2L1H8V72TP2VbGRQx1bUZc3+Fr0FGAAMdCytxQ2+8wAAAABJRU5ErkJggg=="},"./src/custom/login/login2/login.html":function(t,n){t.exports='<div ng-controller="loginCtrl" style="height: 100%;">\r\n    <banner style="background-image:url({{loginInfo.bjUrl}}) ;"  ng-style="{\\\'height\\\':loginInfo.footer ? \\\'calc(100% - 60px)\\\' : \\\'100%\\\'}">\r\n        <div class="title">\r\n            <div class="logBox">\r\n                <img ng-if="loginInfo.logo" ng-src="{{loginInfo.logo}}"/>\r\n            </div>\r\n            <div class="titleText">\r\n                <p>{{loginInfo.cname}}</p>\r\n                <p>{{loginInfo.ename}}</p>\r\n            </div>\r\n        </div>\r\n        <div class="content" ng-style="{\\\'height\\\':loginInfo.footer ? \\\'calc(100% - 125px)\\\' : \\\'100%\\\'}">\r\n            <div class="swiperBox" ng-if="loginInfo.swiperImgs">\r\n                <div class="swiper-container">\r\n                    <div class="swiper-wrapper">\r\n                        <div ng-repeat="item in loginInfo.swiperImgs" class="swiper-slide">\r\n                            <img ng-src="{{item.url}}"/><span class="tips showTips">{{item.caption}}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="swiper-pagination"></div>\r\n                </div>\r\n            </div>\r\n            <form ng-show="loginInfo.system != \\\'ww\\\' && !changePassword">\r\n                <div class="inputBox">\r\n                    <div class="inputTitle">用户登录</div>\r\n                    <ul class="inputList">\r\n                        <li>\r\n                            <img class="iconImg" ng-src="{{userImg}}"/><input class="form-control" type="text" value="" ng-model="loginData.username" name="username" placeholder="请输入您的用户名"/>\r\n                        </li>\r\n                        <li>\r\n                            <img class="iconImg" ng-src="{{passwordImg}}"/><input class="form-control" value="" ng-model="loginData.password" name="password" type="password" placeholder="请输入您的密码"/>\r\n                        </li>\r\n                        <li>\r\n                            <img class="iconImg" ng-src="{{codeImg}}"/>\r\n                            <input class="form-control herfWidth" type="text" name="checkCode" ng-model="loginData.code" placeholder="验证码"/>\r\n                                <span class="codeBox">\r\n                                <img src="" ng-click="reloadCode()" id="imgCode"/></span>\r\n                            <a class="change" href="javascript:;" ng-click="reloadCode()">换一张</a>\r\n                        </li>\r\n                        <li ng-if="loginInfo.register">\r\n                            <span>还没有账号?</span><a ng-href="{{loginInfo.register}}">立即注册</a>\r\n                        </li>\r\n                    </ul>\r\n                    <div class="btnBox">\r\n                        <button class="btn-submit" type="button"  name="submit" ng-click="submit()">登录</button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n            <form ng-show="loginInfo.system == \\\'ww\\\' && !changePassword">\r\n\t\t\t\t<div class="logn-content-box">\r\n\t\t\t\t\t<div class="title">\r\n\t\t\t\t\t\t用户登录\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<ul class="list">\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<span>用户名</span><input type="text" placeholder="请输入用户名" ng-model="loginData.username" name="username" class="form-control" />\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<span>密&nbsp;&nbsp;&nbsp;码</span><input ng-model="loginData.password" name="password" type="password" placeholder="请输入您的密码" class="form-control" />\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<div class="left">\r\n\t\t\t\t\t\t\t\t<span>验证码</span><input type="text" placeholder="验证码"name="checkCode" ng-model="loginData.code" class="form-control" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="right">\r\n\t\t\t\t\t\t\t\t<img src="" ng-click="reloadCode()" id="wwimgCode"/>\r\n\t\t\t\t\t\t\t\t<span><a href="javascript:;" ng-click="reloadCode()">换一张</a></span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<span></span>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<button  type="button" name="submit" ng-click="submit()"  class="btn btn-block btn-primary" type="button">登录</button>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<p>{{loginInfo.unit1}}</p>\r\n\t\t\t\t\t<p>{{loginInfo.unit2}}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t\t<form ng-show="changePassword">\r\n                <div class="inputBox">\r\n                    <div class="inputTitle">修改用户密码</div>\r\n                    <ul class="inputList">\r\n                        <li>\r\n                            <img class="iconImg" ng-src="{{userImg}}"/><input class="form-control" type="text" value="" ng-model="changePasswordData.loginName" name="loginName" placeholder="请输入您的用户名"/>\r\n                        </li>\r\n                        <li>\r\n                            <img class="iconImg" ng-src="{{passwordImg}}"/><input class="form-control" value="" ng-model="changePasswordData.oriPassword" name="oriPassword" type="password" placeholder="请输入原始密码"/>\r\n                        </li>\r\n                        <li>\r\n                            <img class="iconImg" ng-src="{{passwordImg}}"/><input class="form-control" value="" ng-model="changePasswordData.newPassword" name="password" type="password" placeholder="请输入新密码"/>\r\n                        </li>\r\n                        <li>\r\n                            <img class="iconImg" ng-src="{{passwordImg}}"/><input class="form-control" value="" ng-model="changePasswordData.newPasswordAgain" name="newPasswordAgain" type="password" placeholder="请再次输入新密码"/>\r\n                        </li>\r\n                    </ul>\r\n                    <div class="btnBox">\r\n                        <button class="btn-submit" type="button"  name="submit" ng-click="confirmChangePassword()">确认修改</button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </banner>\r\n    <footer ng-if="loginInfo.footer" ng-bind-html="loginInfo.footer | to_trusted"></footer>\r\n</div>'},"./src/custom/login/login2/login.js":function(t,n,o){"use strict";o("./src/custom/frame/frame.js"),o("./src/custom/login/login2/login.less");var s=angular.module("loginApp",[]);s.controller("loginCtrl",["$scope","$timeout",function(t,n){var s;t.loginInfo=loginInfo,t.userImg=o("./src/custom/login/login2/img/user.png"),t.passwordImg=o("./src/custom/login/login2/img/password.png"),t.codeImg=o("./src/custom/login/login2/img/verificationCode.png"),t.changePassword=!1;var e=GM.LayoutOper.getURLParams(window.location.href),r=e.service,a=null==e.appKey?"mainApp":e.appKey;GM.CommonOper.isStrNullOrEmpty(r)&&(r=MAIN_PAGE_PATH),"1"===e.logout&&((s=GM.CommonOper.ajaxRequest(RESTURL.logout))&&!0===s.success?GM.LayoutOper.clearCookie():GM.Alert.show("提示","登出失败！"));var i=GM.CommonOper.getCookie("clientServerToken");if(!GM.CommonOper.isStrNullOrEmpty(i)){var l=GM.LayoutOper.addURLParam(RESTURL.login,"GMSSO_SERVER_EC",i);if(l=GM.LayoutOper.addURLParam(l,"service",r),l=GM.LayoutOper.addURLParam(l,"appKey",a),(s=GM.CommonOper.ajaxRequest(l))&&!0===s.success&&null!=s.data)return c(r,s.data.gmsso_cli_ec_key),!0}if(loginInfo.swiperImgs)var g=n(function(){new Swiper(".swiper-container",{loop:!0,speed:700,autoplay:5e3,pagination:".swiper-pagination",onTransitionStart:function(t){$(".tips").removeClass("showTips")},onTransitionEnd:function(t){$(".swiper-wrapper").find(".swiper-slide").eq(t.activeIndex).find(".tips").addClass("showTips")}}).onResize(),clearTimeout(g)},50);function c(t,n){var o=GM.LayoutOper.addURLParam(t,"GMSSO_CLIENT_EC",n);o=GM.LayoutOper.addURLParam(o,"GMLOGIN_SERVER_EC",i),window.location.href=o}t.loginData={},t.submit=function(){var n=t.loginData;if(n.base64Code=GM.verifyCode,GM.CommonOper.isStrNullOrEmpty(n.username))GM.Alert.show("提示","请输入用户名！");else if(GM.CommonOper.isStrNullOrEmpty(n.password))GM.Alert.show("提示","请输入密码！");else if(GM.CommonOper.isStrNullOrEmpty(n.code))GM.Alert.show("提示","请输入验证码！");else if(n.code.toLowerCase()===n.base64Code.toLowerCase()){n.service=r,n.appKey=a;var o=RESTURL.login,s=GM.CommonOper.ajaxRequest(o,n,{type:"get"});if(s&&!0===s.success&&null!=s.data)GM.CommonOper.addCookie("clientServerToken",s.data.gmsso_ser_ec_key,1),i=s.data.gmsso_ser_ec_key,s.data.gmsso_cli_ec_key?c(r,s.data.gmsso_cli_ec_key):GM.Alert.show("提示","当前子系统路径无法识别！");else{var e=/[A-Za-z].*[0-9]|[0-9].*[A-Za-z]/;s.message.search(/该用户超过半年没有登录/g)>=0?GM.Alert.show("提示",s.message,null,function(){t.changePassword=!0,t.$apply(),t.changePasswordData={},t.confirmChangePassword=function(){if(GM.CommonOper.isStrNullOrEmpty(t.changePasswordData.loginName))GM.Alert.show("提示","请输入用户名！");else if(GM.CommonOper.isStrNullOrEmpty(t.changePasswordData.oriPassword))GM.Alert.show("提示","请输入原始密码！");else if(GM.CommonOper.isStrNullOrEmpty(t.changePasswordData.newPassword))GM.Alert.show("提示","请输入新密码！");else if(GM.CommonOper.isStrNullOrEmpty(t.changePasswordData.newPasswordAgain))GM.Alert.show("提示","请再次输入新密码！");else if(e.test(t.changePasswordData.newPassword)&&e.test(t.changePasswordData.newPasswordAgain))if(t.changePasswordData.newPassword===t.changePasswordData.newPasswordAgain){var n=UUMS_SERVER+"user/updatePassword",o=GM.CommonOper.ajaxRequest(n,t.changePasswordData,{type:"post"});o&&!0===o.success?(GM.Infomation.show("密码修改成功",{type:"success"}),t.changePassword=!1,t.loginData.password=""):GM.Alert.show("提示",o.message)}else GM.Infomation.show("两次输入密码不一致",{type:"warning"});else GM.Alert.show("提示","密码输入不符合规范！密码须包含数字、字母")}}):GM.Alert.show("提示",s.message)}}else GM.Alert.show("提示","验证码错误，请重新输入！")},t.reloadCode=function(){var t=GM.CommonOper.ajaxRequest(LOGIN_SERVER+"getCode?"+Math.random(),null,{type:"get"});t&&!0===t.success&&($("#imgCode").attr("src","data:image/png;base64,"+t.data),$("#wwimgCode").attr("src","data:image/png;base64,"+t.data),GM.verifyCode=t.message)},$(document.body).keyup(function(n){13===n.keyCode&&t.submit()}),t.reloadCode()}]),s.filter("to_trusted",["$sce",function(t){return function(n){return t.trustAsHtml(n)}}]),s.run(["$templateCache",function(t){var n=o("./src/custom/login/login2/login.html");t.put("login.tpl.html",n)}]),angular.bootstrap(document,["loginApp"])},"./src/custom/login/login2/login.less":function(t,n){},"dll-reference base":function(t,n){t.exports=base},"dll-reference ngs":function(t,n){t.exports=ngs},"dll-reference ngui":function(t,n){t.exports=ngui}},["./src/custom/login/login2/login.js"]);
//# sourceMappingURL=login2-55775.bundle.js.map