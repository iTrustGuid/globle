{"version":3,"sources":["webpack:///./src/custom/system-center/center3/system-center.html","webpack:///./src/custom/system-center/center3/system-center.js","webpack:///external \"base\"","webpack:///external \"ngs\"","webpack:///external \"ngui\""],"names":["module","exports","__webpack_require__","app","angular","controller","$scope","$gmRestful","pRestful","GM","FrameManager","prepareData","arrayApps","ii","AppInfos","length","appItem","addItem","img","icon","url","host","txt","title","width","height","permission","name","GLOBAL_INDEX_CONFIG","metroBoxList","push","noPermissionArry","CenterCommon","getPermissionList","i","backgoundImg","logImg","systemName","EnglishSystemName","user","avatar","background","STATIC_RESOURCES_PATH","border-radius","logout","$event","preventDefault","$rootScope","moreItem","pushIntoArray","pItem","arrayBox","bResult","jj","isItemFit","fitArray","nIndexX","nIndexY","bFit","tempArray","nX","nY","result","initArray","arrayPageOne","arrayPageTwo","items","bRt","nPageWidth","nPageHeight","indexOf","moreMetroBoxList","getPageList","goSubsystem","item","className","openSystem","moreOpen","Copyright","moreClose","run","$templateCache","strTem","put","addToken","bootstrap","document","base","ngs","ngui"],"mappings":"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","file":"center3-37ff9.bundle.js","sourcesContent":["module.exports = \"<div ng-controller=\\\"systemCenterCtrl\\\">\\r\\n\\t<div id=\\\"myBanner\\\" ng-controller=\\\"bannerCtrl\\\">\\r\\n\\t\\t<img class=\\\"backImg\\\" ng-src=\\\"{{backgoundImg}}\\\"/>\\r\\n\\t\\t<div class=\\\"title\\\">\\r\\n\\t\\t\\t<div class=\\\"logBox\\\">\\r\\n\\t\\t\\t\\t<img ng-src=\\\"{{logImg}}\\\"/>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"titleText\\\">\\r\\n\\t\\t\\t\\t<p ng-bind=\\\"systemName\\\"></p>\\r\\n\\t\\t\\t\\t<p ng-bind=\\\"EnglishSystemName\\\"></p>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"logOut\\\" ng-init=\\\"userHide = true\\\" ng-mouseover=\\\"userHide = false\\\" ng-mouseleave=\\\"userHide = true\\\">\\r\\n\\t\\t\\t<div><img class=\\\"userImg\\\" ng-style=\\\"{{user.avatar}}\\\" /><span class=\\\"userName\\\" ng-bind=\\\"user.caption\\\"></span><i class=\\\"icon icon-chevron-down\\\"></i></div>\\r\\n\\t\\t\\t<ul class=\\\"message\\\" ng-hide=\\\"userHide\\\">\\r\\n\\t\\t\\t\\t<li><a ng-click=\\\"logout($event)\\\" style=\\\"color: #fff;\\\">退出登录</a></li>\\r\\n\\t\\t\\t</ul>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\t<div id=\\\"metroBox\\\" ng-controller=\\\"metroBoxCtrl\\\">\\r\\n\\t\\t<div class=\\\"subBox\\\" ng-repeat=\\\"list in metroBoxList track by $index\\\" title=\\\"{{list.title}}\\\" ng-class=\\\"{width2:list.width==2,width3:list.width==3,width4:list.width==4,height2:list.height==2,height3:list.height==3,disabled:list.className==\\\\'disable\\\\'}\\\">\\r\\n\\t\\t\\t<a ng-click=\\\"goSubsystem(list,$event,$index)\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"imgBox\\\">\\r\\n\\t\\t\\t\\t\\t<img ng-src=\\\"{{list.img}}\\\"/>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=\\\"txtBox\\\">\\r\\n\\t\\t\\t\\t\\t<span ng-bind=\\\"list.txt\\\"></span>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</a>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\t<footer ng-controller=\\\"footerCtrl\\\" ng-bind=\\\"Copyright\\\"></footer>\\r\\n\\t<div ng-controller=\\\"boxCtrl\\\" class=\\\"box\\\" ng-class=\\\"{\\\\'open\\\\':moreOpen==\\\\'open\\\\'}\\\">\\r\\n\\t\\t<span class=\\\"close\\\" ng-click=\\\"moreClose();\\\"></span>\\r\\n\\t\\t<div id=\\\"moreMetroBox\\\">\\r\\n\\t\\t\\t<div class=\\\"subBox\\\" ng-repeat=\\\"list in moreMetroBoxList track by $index\\\" title=\\\"{{list.title}}\\\" ng-class=\\\"{width2:list.width==2,width3:list.width==3,width4:list.width==4,height2:list.height==2,height3:list.height==3,disabled:list.className==\\\\'disable\\\\'}\\\">\\r\\n\\t\\t\\t\\t<a ng-click=\\\"goSubsystem(list,$event,$index)\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"imgBox\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img ng-src=\\\"{{list.img}}\\\"/>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"txtBox\\\">\\r\\n\\t\\t\\t\\t\\t\\t<span ng-bind=\\\"list.txt\\\"></span>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/custom/system-center/center3/system-center.html\n// module id = ./src/custom/system-center/center3/system-center.html\n// module chunks = center3","import '../../frame/frame.js';\r\nimport '../center-common.js';\r\nimport './system-center.less';\r\n\r\nvar app = angular.module('systemCenterApp', ['gm.ngCustom.control', 'ngResource']);\r\n\r\n//主控制器\r\napp.controller('systemCenterCtrl', ['$scope', '$gmRestful', function ($scope, $gmRestful) {\r\n    //数据准备\r\n    var pRestful = new $gmRestful();\r\n    GM.FrameManager.prepareData($scope, pRestful);\r\n\r\n    //获取APP子系统列表信息\r\n    var arrayApps = [];\r\n    for (var ii = 0; ii < GM.AppInfos.length; ii++) {\r\n        var appItem = GM.AppInfos[ii];\r\n        var addItem = {\r\n            img: appItem.icon,\r\n            url: appItem.host,\r\n            txt: appItem.title,\r\n            title: appItem.title,\r\n            width: 1,\r\n            height: 1,\r\n            permission: appItem.name\r\n        };\r\n        if (GLOBAL_INDEX_CONFIG.metroBoxList && GLOBAL_INDEX_CONFIG.metroBoxList[ii]) {\r\n            addItem.width = GLOBAL_INDEX_CONFIG.metroBoxList[ii].width;\r\n            addItem.height = GLOBAL_INDEX_CONFIG.metroBoxList[ii].height;\r\n            if (GLOBAL_INDEX_CONFIG.metroBoxList[ii].url) {\r\n                addItem.url = GLOBAL_INDEX_CONFIG.metroBoxList[ii].url;\r\n            }\r\n        }\r\n        arrayApps.push(addItem);\r\n    }\r\n\r\n    //子系统权限控制\r\n    var noPermissionArry = GM.CenterCommon.getPermissionList(arrayApps);\r\n    for (var i in noPermissionArry) {\r\n        arrayApps[noPermissionArry[i]]['className'] = 'disable';\r\n        arrayApps[noPermissionArry[i]]['title'] = '无此系统权限';\r\n    }\r\n\r\n    GLOBAL_INDEX_CONFIG.metroBoxList = arrayApps;\r\n}]);\r\n\r\napp.controller('bannerCtrl', ['$scope', function ($scope) {\r\n    $scope.backgoundImg = GLOBAL_INDEX_CONFIG.backgoundImg;\r\n    $scope.logImg = GLOBAL_INDEX_CONFIG.logImg;\r\n    $scope.systemName = GLOBAL_INDEX_CONFIG.systemName;\r\n    $scope.EnglishSystemName = GLOBAL_INDEX_CONFIG.EnglishSystemName;\r\n\r\n    //暂时用的假头像和用户名\r\n    if ($scope.user) {\r\n        $scope.user.avatar = 'syscenter/img/touxiang.png';\r\n        $scope.user.avatar = {\r\n            background: 'url(' + STATIC_RESOURCES_PATH + 'custom/frame/frame2/img/user.png' + ') no-repeat 0 0 / contain',\r\n            'border-radius': '50px'\r\n        };\r\n    }\r\n\r\n    //登出\r\n    $scope.logout = function ($event) {\r\n        GM.FrameManager.logout();\r\n        $event.preventDefault();\r\n    };\r\n}]);\r\napp.controller('metroBoxCtrl', ['$scope', '$rootScope', function ($scope, $rootScope) {\r\n    $scope.metroBoxList = [];\r\n    var moreItem = {\r\n        img: 'syscenter/img/更多3.png',\r\n        url: 'javascript:;',\r\n        name: 'more',\r\n        txt: '更多'\r\n    };\r\n\r\n    //获取当前页需要展示的列表\r\n    getPageList();\r\n\r\n    $rootScope.goSubsystem = function (item) {\r\n        if (item.name !== 'more') {\r\n            if (item.className !== 'disable') {\r\n                GM.CenterCommon.openSystem(item.url);\r\n                return false;\r\n            } else {\r\n                return false;\r\n            }\r\n        } else {\r\n            $rootScope.moreOpen = 'open';\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @hide\r\n     * @description 获取页面的子系统集合\r\n     */\r\n    function getPageList () {\r\n        var nPageWidth = 4;\r\n        var nPageHeight = 3;\r\n        var tempArray = initArray(nPageWidth, nPageHeight);\r\n        var arrayPageOne = [];\r\n        var arrayPageTwo = [];\r\n        var ii;\r\n        var pItem;\r\n        var items = GLOBAL_INDEX_CONFIG.metroBoxList;\r\n\r\n        for (ii = 0; ii < items.length; ii++) {\r\n            pItem = items[ii];\r\n            var bRt = pushIntoArray(pItem, tempArray);\r\n            if (bRt === true) {\r\n                //arrayPageOne.push(pItem);\r\n            } else {\r\n                arrayPageTwo.push(pItem);\r\n            }\r\n        }\r\n\r\n        if (arrayPageTwo.length === 0) {\r\n            tempArray[nPageWidth - 1][nPageHeight - 1] = null;\r\n        }\r\n\r\n        for (ii = 0; ii < nPageHeight; ii++) {\r\n            for (var jj = 0; jj < nPageWidth; jj++) {\r\n                pItem = tempArray[jj][ii];\r\n                if (arrayPageOne.indexOf(pItem) === -1 && pItem != null) {\r\n                    arrayPageOne.push(pItem);\r\n                }\r\n            }\r\n        }\r\n        $scope.metroBoxList = arrayPageOne;\r\n        $rootScope.moreMetroBoxList = arrayPageTwo;\r\n    }\r\n\r\n    /**\r\n     * @hide\r\n     * @description 初始化二维数组\r\n     * @method initArray\r\n     * @param {Number} nX\r\n     * @param {Number} nY\r\n     * @return {Array}\r\n     */\r\n    function initArray (nX, nY) {\r\n        var result = [];\r\n        for (var ii = 0; ii < nX; ii++) {\r\n            result[ii] = [];\r\n            for (var jj = 0; jj < nY; jj++) {\r\n                result[ii][jj] = null;\r\n            }\r\n        }\r\n        result[nX - 1][nY - 1] = moreItem;\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * @hide\r\n     * @description 将数组元素插入二维数组中\r\n     * @method pushIntoArray\r\n     * @param {Number} pItem 数组元素\r\n     * @param {Array} arrayBox 二维数组\r\n     * @return {boolean} 是否插入成功\r\n     */\r\n    function pushIntoArray (pItem, arrayBox) {\r\n        var bResult = false;\r\n        for (var ii = 0; ii < arrayBox.length; ii++) {\r\n            for (var jj = 0; jj < arrayBox[ii].length; jj++) {\r\n                if (arrayBox[ii][jj] == null) {\r\n                    var bFit = isItemFit(pItem, arrayBox, ii, jj);\r\n                    if (bFit) {\r\n                        fitArray(pItem, arrayBox, ii, jj);\r\n                        bResult = true;\r\n                        return bResult;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return bResult;\r\n    }\r\n\r\n    /**\r\n     * @hide\r\n     * @description 当前页是否能够放下该模块\r\n     * @method isItemFit\r\n     * @param pItem\r\n     * @param arrayBox\r\n     * @param nIndexX\r\n     * @param nIndexY\r\n     * @return {boolean}\r\n     */\r\n    function isItemFit (pItem, arrayBox, nIndexX, nIndexY) {\r\n        var bFit = true;\r\n        for (var ii = nIndexX; ii < nIndexX + pItem.width; ii++) {\r\n            if (ii >= arrayBox.length) {\r\n                return false;\r\n            }\r\n            for (var jj = nIndexY; jj < nIndexY + pItem.height; jj++) {\r\n                if (jj >= arrayBox[ii].length) {\r\n                    return false;\r\n                }\r\n                if (arrayBox[ii][jj] != null) {\r\n                    bFit = false;\r\n                    return bFit;\r\n                }\r\n            }\r\n        }\r\n        return bFit;\r\n    }\r\n\r\n    /**\r\n     * @hide\r\n     * @description 能够放入二维数组的前提下插入到数组\r\n     * @param pItem\r\n     * @param arrayBox\r\n     * @param nIndexX\r\n     * @param nIndexY\r\n     */\r\n    function fitArray (pItem, arrayBox, nIndexX, nIndexY) {\r\n        for (var ii = nIndexX; ii < nIndexX + pItem.width; ii++) {\r\n            for (var jj = nIndexY; jj < nIndexY + pItem.height; jj++) {\r\n                arrayBox[ii][jj] = pItem;\r\n            }\r\n        }\r\n    }\r\n}]);\r\napp.controller('footerCtrl', ['$scope', function ($scope) {\r\n    $scope.Copyright = GLOBAL_INDEX_CONFIG.Copyright;\r\n}]);\r\napp.controller('boxCtrl', ['$scope', '$rootScope', function ($scope, $rootScope) {\r\n    $rootScope.moreOpen = 'close';\r\n    $scope.moreClose = function () {\r\n        $rootScope.moreOpen = 'close';\r\n    };\r\n}]);\r\napp.run(['$templateCache', function ($templateCache) {\r\n    let strTem = require('./system-center.html');\r\n    $templateCache.put('system-center.tpl.html', strTem);\r\n}]);\r\n\r\n//验证token\r\nGM.FrameManager.addToken(app);\r\n\r\nangular.bootstrap(document, ['systemCenterApp']);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/custom/system-center/center3/system-center.js","module.exports = base;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"base\"\n// module id = dll-reference base\n// module chunks = frame2 frame3 center1 center2 center3 login1 login2","module.exports = ngs;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ngs\"\n// module id = dll-reference ngs\n// module chunks = frame2 frame3 center1 center2 center3 login1 login2","module.exports = ngui;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ngui\"\n// module id = dll-reference ngui\n// module chunks = frame2 frame3 center1 center2 center3 login1 login2"],"sourceRoot":""}