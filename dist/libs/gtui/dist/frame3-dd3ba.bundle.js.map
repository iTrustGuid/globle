{"version":3,"sources":["webpack:///./src/custom/frame/frame3/frame.html","webpack:///./src/custom/frame/frame3/frame.js","webpack:///external \"base\"","webpack:///external \"ngs\"","webpack:///external \"ngui\""],"names":["module","exports","__webpack_require__","frameTem","frameApp","angular","GM","FrameManager","configModule","controller","$scope","$location","$gmRestful","$cookies","$state","ii","frameData","GLOBAL_FRAME_CONFIG","strPath","LayoutOper","getURLWithoutParams","absUrl","loginUrl","LOGIN_PATH","indexUrl","MAIN_PAGE_PATH","naviHide","activeChildItem","threeNaviHide","fullScreen","getObject","bMenuShow","themeName","get","mapMenuItems","showMapMenuPanel","menuTagData","focusTab","tabs","nTabWidth","showIcon","clickTab","navi","length","pItem","bRt","hasPermission","permission","tagItem","name","caption","push","map","children","newChildren","jj","pSubItem","pRestful","prepareData","addCommonApi","back","userImg","background","STATIC_RESOURCES_PATH","Util","pNaviData","oneItem","path","focusMenu","focusSubMenu","twoItem","$on","angularEvent","newUrl","oldUrl","logout","$event","preventDefault","activeNaviFromPath","goPath","refreshPage","strName","substr","reload","setNaviMode","$broadcast","clickChildItem","goPathFromFrame","event","target","getAttribute","bActiveItem","CommonOper","isStrNullOrEmpty","replace","setFullScreen","put","showMenu","defaultViewTabs","addToken","run","$templateCache","base","ngs","ngui"],"mappings":"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","file":"frame3-dd3ba.bundle.js","sourcesContent":["module.exports = \"<div ng-controller=\\\"frameCtrl\\\" class=\\\"frame3\\\">\\r\\n    <header class=\\\"frame3-header\\\" ng-class=\\\"{'full-screen':fullScreen}\\\">\\r\\n        <div class=\\\"system-info\\\">\\r\\n            <div class=\\\"logo\\\"><img src=\\\"{{frameData.logo}}\\\" /></div>\\r\\n            <div class=\\\"system-name\\\">\\r\\n                <div ng-bind=\\\"frameData.systemName\\\"></div>\\r\\n                <div ng-bind=\\\"frameData.systemEnglishName\\\"></div>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"main-menu\\\">\\r\\n            <div gm-tabs tabdata=\\\"menuTagData\\\" show-close=\\\"false\\\"></div>\\r\\n        </div>\\r\\n        <div class=\\\"user-info\\\">\\r\\n            <div class=\\\"btn-group\\\">\\r\\n                <div class=\\\"user-img\\\">\\r\\n                    <div ng-style=\\\"userImg\\\"></div>\\r\\n                </div>\\r\\n                <div class=\\\"dropdown-toggle\\\" data-toggle=\\\"dropdown\\\"> <span class=\\\"text-nowrap\\\">{{user.caption}}</span> <span class=\\\"icon icon-chevron-down\\\"></span> </div>\\r\\n                <ul class=\\\"dropdown-menu\\\" role=\\\"menu\\\">\\r\\n                    <li><a ng-click=\\\"logout($event)\\\">退出登录</a></li>\\r\\n                    <li><a ng-href=\\\"{{frameData.indexUrl}}\\\">返回主页面</a></li>\\r\\n                </ul>\\r\\n            </div>\\r\\n        </div>\\r\\n    </header>\\r\\n    <div class=\\\"frame-content\\\">\\r\\n        <div class=\\\"menu scrollbar-hover un-select\\\" ng-class=\\\"{'full-screen':fullScreen,hidden1:fullScreen && !bMenuShow}\\\" ng-if=\\\"focusMenu.children && focusMenu.children.length > 0\\\">\\r\\n            <nav>\\r\\n                <div class=\\\"menu-item\\\" ng-class=\\\"{'active':pItem.name === focusSubMenu.name}\\\" ng-repeat=\\\"pItem in focusMenu.children\\\" ng-click=\\\"clickChildItem(pItem);\\\"> <i ng-if=\\\"!pItem.img\\\" class=\\\"icon icon-folder-close\\\" ng-class=\\\"pItem.class\\\"></i> <img class=\\\"nav-icon\\\" ng-if=\\\"pItem.img\\\" ng-src=\\\"{{pItem.img}}\\\"> <span class=\\\"title text-nowrap\\\" ng-bind=\\\"pItem.name\\\"></span>\\r\\n                    <div class=\\\"menu-arrow\\\" ng-show=\\\"focusSubMenu.map == true && focusSubMenu.templateUrl != null && showMapMenuPanel == true\\\"></div>\\r\\n                </div>\\r\\n            </nav>\\r\\n        </div>\\r\\n        <div class=\\\"content\\\">\\r\\n            <div ui-view style=\\\"height: 100%\\\" ng-show=\\\"!focusSubMenu.map\\\"></div>\\r\\n            <div class=\\\"map-content\\\" ng-show=\\\"focusSubMenu.map\\\">\\r\\n                <div class=\\\"map-content-left\\\" ng-class=\\\"{'show':focusSubMenu.templateUrl != null && showMapMenuPanel == true}\\\">\\r\\n                    <div ng-repeat=\\\"pItem in mapMenuItems\\\" ng-if=\\\"pItem.templateUrl\\\" ng-show=\\\"focusSubMenu.name === pItem.name\\\">\\r\\n                        <div ng-include=\\\"pItem.templateUrl\\\"></div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"map-content-right\\\" ng-include=\\\"mapUrl\\\"></div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n    <footer> </footer>\\r\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/custom/frame/frame3/frame.html\n// module id = ./src/custom/frame/frame3/frame.html\n// module chunks = frame3","import 'frame';\r\nimport './frame.less';\r\nvar frameTem = require('./frame.html');\r\n\r\n/**\r\n * @class NgModule.frame3 frame3模块\r\n * @alias frame3\r\n * @author LP\r\n */\r\nvar frameApp = angular.module('frameApp', ['ui.router', 'ngAnimate', 'gm.ngCustom.control', 'ngResource', 'ngSanitize', 'ngCookies']);\r\n\r\nGM.FrameManager.configModule(frameApp);\r\n\r\n/**\r\n * @class NgModule.frame3.frameCtrl 框架控制器\r\n * @extends NgModule.frame.frameCtrl\r\n * @author LP\r\n */\r\nframeApp.controller('frameCtrl', ['$scope', '$location', '$gmRestful', '$cookies', '$state',\r\n    function ($scope, $location, $gmRestful, $cookies, $state) {\r\n        var ii;\r\n        $scope.frameData = GLOBAL_FRAME_CONFIG;\r\n        //获取登出路径\r\n        var strPath = GM.LayoutOper.getURLWithoutParams($location.absUrl());\r\n        $scope.frameData.loginUrl = LOGIN_PATH + '?service=' + strPath + '&logout=1';\r\n        $scope.frameData.indexUrl = MAIN_PAGE_PATH;\r\n        $scope.naviHide = false; //是否隐藏大导航框\r\n        $scope.activeChildItem = null; //处于焦点的二级子节点\r\n        $scope.threeNaviHide = true; //三级菜单是否隐藏\r\n        $scope.fullScreen = $cookies.getObject('fullScreen');\r\n        $scope.bMenuShow = false; //在全屏模式下时候显示菜单\r\n        $scope.themeName = $cookies.get('themeName'); //系统主题\r\n        $scope.themeName = $scope.themeName == null ? 'blue' : $scope.themeName;\r\n        $scope.mapMenuItems = []; //与地图相关的菜单项\r\n        $scope.showMapMenuPanel = true; //是否展示地图上的左侧菜单面板\r\n\r\n        //获取标签数据\r\n        $scope.menuTagData = {\r\n            focusTab: '',\r\n            tabs: [],\r\n            nTabWidth: 130,\r\n            showIcon: true,\r\n            clickTab: 'clickTab'\r\n        };\r\n\r\n        //组织数据\r\n        for (ii = 0; ii < GLOBAL_FRAME_CONFIG.navi.length; ii++) {\r\n            var pItem = GLOBAL_FRAME_CONFIG.navi[ii];\r\n            var bRt = GM.FrameManager.hasPermission(pItem.permission);\r\n            if (bRt === true) {\r\n                var tagItem = pItem;\r\n                tagItem.name = pItem.name;\r\n                tagItem.caption = pItem.name;\r\n                $scope.menuTagData.tabs.push(tagItem);\r\n                if (pItem.map) {\r\n                    $scope.mapMenuItems.push(tagItem);\r\n                }\r\n                if (tagItem.children) {\r\n                    var newChildren = [];\r\n                    for (var jj = 0; jj < tagItem.children.length; jj++) {\r\n                        var pSubItem = tagItem.children[jj];\r\n                        bRt = GM.FrameManager.hasPermission(pSubItem.permission);\r\n                        if (bRt) {\r\n                            newChildren.push(pSubItem);\r\n                            if (pSubItem.map) {\r\n                                $scope.mapMenuItems.push(pSubItem);\r\n                            }\r\n                        }\r\n                    }\r\n                    tagItem.children = newChildren;\r\n                }\r\n            }\r\n        }\r\n\r\n        //数据准备\r\n        var pRestful = new $gmRestful();\r\n        GM.FrameManager.prepareData($scope, pRestful);\r\n\r\n        //添加公共接口\r\n        GM.FrameManager.addCommonApi($scope);\r\n        //地图模式中，左侧面板关闭函数\r\n        $scope.back = function () {\r\n            $scope.showMapMenuPanel = false;\r\n        };\r\n\r\n        //设置用户头像\r\n        $scope.userImg = {\r\n            background: 'url(' + STATIC_RESOURCES_PATH + 'custom/frame/frame3/img/user.png' + ') no-repeat 0 0 / contain'\r\n        };\r\n\r\n        //函数定义\r\n        var Util = {\r\n            //根据路由路径激活不同的导航项\r\n            activeNaviFromPath: function (strPath) {\r\n                var pNaviData = $scope.menuTagData.tabs;\r\n                for (var ii = 0; ii < pNaviData.length; ii++) {\r\n                    var oneItem = pNaviData[ii];\r\n                    if (oneItem.path === strPath) {\r\n                        $scope.focusMenu = oneItem;\r\n                        $scope.focusSubMenu = oneItem;\r\n                        $scope.menuTagData.focusTab = oneItem.name;\r\n                        break;\r\n                    }\r\n                    if (oneItem.children) {\r\n                        for (var jj = 0; jj < oneItem.children.length; jj++) {\r\n                            var twoItem = oneItem.children[jj];\r\n                            if (twoItem.path === strPath) {\r\n                                $scope.focusMenu = oneItem;\r\n                                $scope.focusSubMenu = twoItem;\r\n                                $scope.menuTagData.focusTab = oneItem.name;\r\n                                return;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        $scope.$on('$locationChangeSuccess', function (angularEvent, newUrl, oldUrl) {\r\n            Util.activeNaviFromPath($location.path());\r\n        });\r\n\r\n        $scope.logout = function ($event) {\r\n            GM.FrameManager.logout();\r\n            $event.preventDefault();\r\n        };\r\n\r\n        //对外调用的标签跳转函数\r\n        $scope.activeNaviFromPath = function (strPath) {\r\n            Util.activeNaviFromPath(strPath);\r\n            $scope.goPath(strPath);\r\n        };\r\n\r\n        //刷新路由页面\r\n        $scope.refreshPage = function (strPath) {\r\n            var strName = strPath.substr(1);\r\n            $state.reload(strName);\r\n        };\r\n\r\n        //设置导航模式\r\n        $scope.setNaviMode = function () {\r\n            $scope.naviHide = !$scope.naviHide;\r\n        };\r\n\r\n        //选择主菜单\r\n        $scope.clickTab = function (pItem) {\r\n            $scope.focusMenu = pItem;\r\n            if ($scope.focusMenu.children == null || $scope.focusMenu.children.length === 0) {\r\n                $scope.focusSubMenu = $scope.focusMenu;\r\n                if ($scope.focusSubMenu.map !== true) {\r\n                    $scope.goPath($scope.focusSubMenu.path);\r\n                } else {\r\n                    //地图模式\r\n                    $scope.$broadcast('clickMenu', $scope.focusSubMenu);\r\n                    $scope.showMapMenuPanel = true;\r\n                }\r\n            } else {\r\n                $scope.clickChildItem($scope.focusMenu.children[0]);\r\n            }\r\n        };\r\n\r\n        //导航条子级节点击事件\r\n        $scope.clickChildItem = function (pSubItem) {\r\n            //设置焦点节点\r\n            $scope.focusSubMenu = pSubItem;\r\n            if ($scope.focusSubMenu.map !== true) {\r\n                $scope.goPath($scope.focusSubMenu.path);\r\n            } else {\r\n                //地图模式\r\n                $scope.showMapMenuPanel = true;\r\n                $scope.$broadcast('clickMenu', $scope.focusSubMenu);\r\n            }\r\n        };\r\n\r\n        //通过事件路由到具体页面\r\n        $scope.goPathFromFrame = function (event) {\r\n            if (event != null) {\r\n                var strPath = event.target.getAttribute('path');\r\n                $scope.goPath(strPath, true);\r\n            }\r\n        };\r\n\r\n        //路由到具体页面\r\n        $scope.goPath = function (strPath, bActiveItem) {\r\n            bActiveItem = bActiveItem == null ? false : bActiveItem;\r\n            if (strPath != null && strPath !== '') {\r\n                //处理导航条焦点\r\n                if (bActiveItem === true) {\r\n                    Util.activeNaviFromPath(strPath);\r\n                }\r\n                var strOldPath = $location.path();\r\n                if (strOldPath === strPath && !GM.CommonOper.isStrNullOrEmpty(strPath)) {\r\n                    //刷新路由页面\r\n                    var strName = strPath.substr(1);\r\n                    if (!GM.CommonOper.isStrNullOrEmpty(strName)) {\r\n                        $state.reload(strName);\r\n                    }\r\n                } else {\r\n                    //切换路由\r\n                    $location.path(strPath).replace();\r\n                }\r\n            }\r\n        };\r\n\r\n        //全图\r\n        $scope.setFullScreen = function () {\r\n            $scope.fullScreen = !$scope.fullScreen;\r\n            $cookies.put('fullScreen', $scope.fullScreen);\r\n\r\n            //设置样式\r\n        };\r\n\r\n        //设置菜单是否可见\r\n        $scope.showMenu = function () {\r\n            $scope.bMenuShow = !$scope.bMenuShow;\r\n        };\r\n\r\n        //---------------tab模式---------------\r\n\r\n        //默认展示标签\r\n        if ($scope.defaultViewTabs) {\r\n            for (ii = 0; ii < $scope.defaultViewTabs.length; ii++) {\r\n                $scope.activeNaviFromPath($scope.defaultViewTabs[ii]);\r\n            }\r\n        }\r\n        //---------------查询表单---------------\r\n\r\n        //根据地址设置菜单焦点\r\n        Util.activeNaviFromPath($location.path());\r\n    }\r\n]);\r\n\r\n//验证token\r\nGM.FrameManager.addToken(frameApp);\r\n\r\n//模板申明\r\nframeApp.run(['$templateCache', function ($templateCache) {\r\n    $templateCache.put('frame.tpl.html', frameTem);\r\n}]);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/custom/frame/frame3/frame.js","module.exports = base;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"base\"\n// module id = dll-reference base\n// module chunks = frame2 frame3 center1 center2 center3 login1 login2","module.exports = ngs;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ngs\"\n// module id = dll-reference ngs\n// module chunks = frame2 frame3 center1 center2 center3 login1 login2","module.exports = ngui;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ngui\"\n// module id = dll-reference ngui\n// module chunks = frame2 frame3 center1 center2 center3 login1 login2"],"sourceRoot":""}